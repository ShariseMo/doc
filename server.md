# 服务器相关操作注意

> 重启服务器

- 阿里云服务器重启之后，不会自动启动 redis，需要手工启动或者在配置文件中加上参数
  - redis 一般在 /etc/redis 目录下
  - 写个 systemd 自启动
  - 将 daemonize 写入配置文件【守护进程】
  - redis-server --daemonize yes 【以守护进程形式启动 redis】
  - redis-server &



## 环境变量

> 系统中的环境变量path都是做什么的 ？
- path环境变量： 指定命令搜索路径
  在命令行下面执行 诸如Java编译程序时，他会到path变量所指定的路径中查找是否能找到相应命令程序
  我们需要把jdk安装目录下的bin目录增加到现有的path变量中
  设置好path变量之后，就可以在任意目录下执行javac/java等工具了



## 微信开放平台

### 第三方平台--代小程序实现业务
> 第三方平台帮助旗下已授权的小程序进行代码管理时，需要先开发完成小程序模板，再将小程序模板部署到旗下小程序账号下

1. 绑定开发小程序，开发--上传模板
2. 调用接口，为旗下授权小程序部署代码
  - 设置小程序服务器域名
    授权给第三方的小程序，其服务器域名只可以为第三方的服务器，当小程序通过第三方发布代码上线后，小程序原先自己配置的服务器域名将被删除，只保留第三方平台的域名，所以第三方平台在代替小程序发布代码之前，需要调用接口为小程序添加第三方自身的域名。
    请求方式: POST（https）：https://api.weixin.qq.com/wxa/modify_domain?access_token=TOKEN
  - 设置小程序业务域名（仅供第三方代小程序调用）
    授权给第三方的小程序，其业务域名只可以为第三方的服务器，当小程序通过第三方发布代码上线后，小程序原先自己配置的业务域名将被删除，只保留第三方平台的域名，所以第三方平台在代替小程序发布代码之前，需要调用接口为小程序添加业务域名。
    提示：  
    （1）需要先将域名登记到第三方平台的小程序业务域名中，才可以调用接口进行配置。  
    （2）为授权的小程序配置域名时支持配置子域名，例如第三方登记的业务域名如为qq.com，则可以直接将qq.com及其子域名（如xxx.qq.com）也配置到授权的小程序中。
    请求方式: POST（请使用https协议）： https://api.weixin.qq.com/wxa/setwebviewdomain?access_token=TOKEN
  - 设置小程序隐私设置（是否可被搜索）
    请求方式: POST（请使用https协议）： https://api.weixin.qq.com/wxa/changewxasearchstatus?access_token=TOKEN
  - 绑定微信用户为小程序体验者
    https://api.weixin.qq.com/wxa/bind_tester?access_token=TOKEN
  - 获取小程序模板
  - 为授权的小程序账号上传小程序代码  
    (1)为了便于第三方平台使用同一个小程序模板为不同的小程序提供服务，第三方可以将自定义信息放置在ext.json中，在模板小程序中可以使用接口获取自定义信息从而区分不同的小程序
  - 获取小程序体验二维码
  - 将第三方提交的代码包提交审核（仅供第三方开发者代小程序调用）
  - 获取审核结果
  - 发布通过审核的小程序
  

注意： 小程序授权托管之后，只能使用第三方平台的在微信开放平台登记的服务器地址。所以第三方平台在帮助旗下公众号发布代码之前，需先把服务器地址设置到小程序的服务器地址中，设置接口详见“修改服务器地址”文档中的接口。


### 微信开放平台与第三方平台的理解
这个文章说的不错： https://mp.weixin.qq.com/s/dX0v-Ovvrjm9Q7o9lPGNKw

> 开放平台： 开放平台是具有开发能力的企业（或个人）用来开发相关功能或者为网站应用以及App获取微信登录能力和微信支付功能的



> 第三方平台：为不具备开发能力（的企业或个人）但想要实现微信公众平台相关能力，就有企业来做一些通用的功能来帮助实现的中间桥梁








