## 工作任务

2019-02-18

[x] 万纯后台：微商城订单数据(抢购数据清理) 【OK】
用 order_type 字段区分： 订单类型 0 正常订单 1 限时抢购

[x] 万纯后台： 工作台--积分商城--跳转链接失效（修改路由后没有改） 【OK】

[x] 导购助手：

- 商品分类： 一级分类（一级分类下的数据不对） 【OK】
- 商品分类： 分类间距调整 【ok】 已提交审核

[x] 小程序商城： 客服消息只会发给第三方服务器，企业下的小程序后台看不到客服消息 【ok】
[x] CRM 域名替换安全证书 ssh （crm.pinkr.com 2019-02-28 过期）

2019-02-25
[x] 导购助手：抢单 加货号
销售小票 加跳转明细

2019-03-13
[x] 商城--领取优惠券接口
[x] 完善接口：退款--商家同意退款之后，将原订单状态改为 订单关闭
[x] 导购助手：进入详情页，如果没有二维码和小程序码，就重新生成

2019-03-14
[] 凯乐石 的 旧数据迁移测试：已经拿取了一部分旧数据，需要获取白名单，然后测试 公众号 openid 获取 unionid 的方法
[x] 生日发券活动：CRM 页面

2019-03-26
[x] 工作台：微商城统计数据
[x] 生日发券：测试
[] 凯乐石： 数据处理

2019-03-27
[] 整理【初始化商户准备工作】文档： shimo
[x] 导购列表：增加手机号，导购编号查询
[] 小程序会员：历史消费（增加商城订单），
[] 小程序商城： 增加门店自提
[] 积分计算开启与关闭： 凯乐石 erp 没有计算积分，需要在品氪 crm 计算（在 CRM 后台给积分计算做一个计算与否的开启的地方）

2019-03-29
[x] 凯乐石生日发券
[] 整理订单表
[] 会员资产--列表：多选按钮多出来一个 选择全部

219-04-01
[x] 凯乐石积分计算，在 crm 后台做开启设置
[x] 小程序会员 的 消费时间 ，取成了同步时间
[x] 职业门的附近门店出不来，对象不存在的报错
[x] 凯乐石导出两个城市的数据
[x] 工作台中导购，门店可横向拖拉

2019-04-08
[] 小程序商城改版：提货
[] 小程序会员改版：历史消费
[x] 导购助手：门店开卡数据不对
[x] CRM 后台：客服发券
[x] CRM 后台：数据--开卡--导出 报错
[x] 导购助手：排行中加上合计

2019-04-12
[x] 限时抢购：选择商品【商品要求是微商城上架商品】
[x] 限时抢购：审核活动
[x] 导购助手：增加店长代码登陆，手工销券点击问题
[] 小程序会员：专属门店-会员权益：无论点击什么进去都是选中【积分兑换权益】

2019-04-19
[] 小程序会员：专属门店-会员权益：无论点击什么进去都是选中【积分兑换权益】, 将全国调货改成售后服务
[] 附近的门店： 距离选择，城市选择
[] 导购助手： 订单  商城名称
[] 门店特色服务：没有关联上  会员权益中设置的 会员特权 【更新门店】

2019-04-22
[] 营销助手：首页，导购排行，门店排行（5.1之前出来），商品销售排行
[] 家咏乐上线
[] 凯乐石上线收尾


## 长期任务

- 后台系统升级
  node 版本比较旧，webpack 版本也旧
  node 版本升级到了 10.0 以上，项目打包速度加快了

- 接口文档完善

- 凯乐石升级
  [x] 会员等级名称不能超过 5 个字符【要改】

## 提升自身任务

- 学习 electron
- nvm 安装
  Windows 系统只能安装 nvm-windows 或者 nvmw
- 学习使用 mac

## 第三方平台--代小程序实现业务

> 第三方平台帮助旗下已授权的小程序进行代码管理时，需要先开发完成小程序模板，再将小程序模板部署到旗下小程序账号下

1. 绑定开发小程序，开发--上传模板
2. 调用接口，为旗下授权小程序部署代码
   a. 设置小程序服务器域名
   授权给第三方的小程序，其服务器域名只可以为第三方的服务器，当小程序通过第三方发布代码上线后，小程序原先自己配置的服务器域名将被删除，只保留第三方平台的域名，所以第三方平台在代替小程序发布代码之前，需要调用接口为小程序添加第三方自身的域名。
   请求方式: POST（https）：https://api.weixin.qq.com/wxa/modify_domain?access_token=TOKEN
   b. 设置小程序业务域名（仅供第三方代小程序调用）
   授权给第三方的小程序，其业务域名只可以为第三方的服务器，当小程序通过第三方发布代码上线后，小程序原先自己配置的业务域名将被删除，只保留第三方平台的域名，所以第三方平台在代替小程序发布代码之前，需要调用接口为小程序添加业务域名。
   提示：
   （1）需要先将域名登记到第三方平台的小程序业务域名中，才可以调用接口进行配置。
   （2）为授权的小程序配置域名时支持配置子域名，例如第三方登记的业务域名如为 qq.com，则可以直接将 qq.com 及其子域名（如 xxx.qq.com）也配置到授权的小程序中。
   请求方式: POST（请使用 https 协议）： https://api.weixin.qq.com/wxa/setwebviewdomain?access_token=TOKEN
   c. 设置小程序隐私设置（是否可被搜索）
   请求方式: POST（请使用 https 协议）： https://api.weixin.qq.com/wxa/changewxasearchstatus?access_token=TOKEN
   d. 绑定微信用户为小程序体验者
   https://api.weixin.qq.com/wxa/bind_tester?access_token=TOKEN
   e. 获取小程序模板
   f. 为授权的小程序账号上传小程序代码
   (1)为了便于第三方平台使用同一个小程序模板为不同的小程序提供服务，第三方可以将自定义信息放置在 ext.json 中，在模板小程序中可以使用接口获取自定义信息从而区分不同的小程序
   g. 获取小程序体验二维码
   h. 将第三方提交的代码包提交审核（仅供第三方开发者代小程序调用）
   i. 获取审核结果
   j.发布通过审核的小程序

注意： 小程序授权托管之后，只能使用第三方平台的在微信开放平台登记的服务器地址。所以第三方平台在帮助旗下公众号发布代码之前，需先把服务器地址设置到小程序的服务器地址中，设置接口详见“修改服务器地址”文档中的接口。
